<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Z3 by raph-amiard</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Z3</h1>
          <h2>An LLVM backed runtime for OCaml</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/raph-amiard/Z3/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/raph-amiard/Z3/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/raph-amiard/Z3" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>Z3 : An LLVM backed runtime for OCaml</h1>

<p>Z3 allows you to run OCaml bytecode with the regular OCaml runtime, and an LLVM backend.</p>

<p>It is quite faster than the regular OCaml interpreter, but a lot slower than ocamlopt, OCaml's native code compiler.</p>

<p>The idea is to reuse ocaml's runtime and builtins, but to plug in an LLVM backed native code generator.</p>

<h2>A word of caution</h2>

<p><em>THIS IS ALPHA SOFTWARE</em>
A lot of things don't yet work. If you would be so kind, send me test cases with complete instructions on how to reproduce the case.</p>

<h2>Building the project</h2>

<h3>What you need</h3>

<ul>
<li>A recent version of clang and LLVM (post 3.0 for LLVM). 
The one on debian unstable is working fine, but you can build it too if your distro doesn't provide recent enough packages.</li>
<li>gcc (for building the OCaml runtime). OCaml will build with clang if you feel brave enough to edit its makefiles.</li>
<li>libboost-program-options</li>
</ul><h3>How does the build works</h3>

<p>Z3 depends on a <em>very slightly modified</em> version of the OCaml runtime, so the first thing that will be done is to get OCaml's sources, patch them, and build this modified version of the runtime.
Then Z3 will be built.
Z3 is coded in C++, because it is LLVM language, and more convenient in my opinion regarding use of data structures and such than pure C. It could have been done in OCaml, but it wasn't.</p>

<h2>How to use it</h2>

<p>Z3 works in the same way ocamlrun does : It takes a bytecode file in, and compiles <em>and</em> runs the program.
There is no option <em>yet</em> for AOT compilation, but it shouldn't be too hard to bake in.</p>

<p>So the workflow is something like :</p>

<div class="highlight"><pre>ocamlc myprogram.ml
Z3 a.out
</pre></div>

<h2>Testing</h2>

<p>Run "python tests/runtests.py" to run all regression tests</p>

<h3>About it</h3>

<p>This project is a proof of concept, and a way to explore some ideas regarding compilation of OCaml bytecode.
The version on the main trunk is one of such approaches, and the one that works the best, but also the simplest and slowest.</p>

<p>Here is the performance you can expect from it :</p>

<p><img src="http://i.imgur.com/pS7fv.png" alt="Z3 benchmarks"></p>
        </section>

        <footer>
          Z3 is maintained by <a href="https://github.com/raph-amiard">raph-amiard</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>