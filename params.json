{"google":"","note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"An LLVM backed runtime for OCaml","name":"CamllVM","body":"CamllVM : An LLVM backed runtime for OCaml\r\n=========================================\r\n\r\nCamllVM allows you to run OCaml bytecode with the regular OCaml runtime, and an LLVM backend.\r\n\r\nIt is quite faster than the regular OCaml interpreter, but a lot slower than ocamlopt, OCaml's native code compiler.\r\n\r\nThe idea is to reuse ocaml's runtime and builtins, but to plug in an LLVM backed native code generator.\r\n\r\nA word of caution\r\n-----------------\r\n\r\n*THIS IS ALPHA SOFTWARE*\r\nA lot of things don't yet work. If you would be so kind, send me test cases with complete instructions on how to reproduce the case.\r\n\r\nBuilding the project\r\n--------------------\r\n\r\n### What you need\r\n\r\n- A recent version of clang and LLVM (post 3.0 for LLVM). \r\nThe one on debian unstable is working fine, but you can build it too if your distro doesn't provide recent enough packages.\r\n- gcc (for building the OCaml runtime). OCaml will build with clang if you feel brave enough to edit its makefiles.\r\n- libboost-program-options\r\n\r\n### How does the build works\r\n\r\nCamllVM depends on a *very slightly modified* version of the OCaml runtime, so the first thing that will be done is to get OCaml's sources, patch them, and build this modified version of the runtime.\r\nThen CamllVM will be built.\r\nCamllVM is coded in C++, because it is LLVM's language, and more convenient in my opinion regarding use of data structures and such than pure C. It could have been done in OCaml, but it wasn't.\r\n\r\nHow to use it\r\n-------------\r\n\r\nCamllVM works in the same way ocamlrun does : It takes a bytecode file in, and compiles *and* runs the program.\r\nThere is no option *yet* for AOT compilation, but it shouldn't be too hard to bake in.\r\n\r\nSo the workflow is something like :\r\n\r\n~~~sh\r\nocamlc myprogram.ml\r\ncamllvm a.out\r\n~~~\r\n\r\nTesting\r\n-------\r\n\r\nRun \"python tests/runtests.py\" to run all regression tests\r\n\r\n### About it\r\n\r\nThis project is a proof of concept, and a way to explore some ideas regarding compilation of OCaml bytecode.\r\nThe version on the main trunk is one of such approaches, and the one that works the best, but also the simplest and slowest.\r\n\r\nHere is the performance you can expect from it :\r\n\r\n![camllvm benchmarks](http://i.imgur.com/pS7fv.png)\r\n\r\nCamllVM is named \"Z3\" here, because it was the original name for this project.\r\n\r\n### If you like that\r\n\r\nMail me if you are interrested in the project : raph.amiard at gmail dot com\r\n\r\nFollow me on twitter for updates : [@notfonk](http://twitter.com/notfonk)\r\n\r\n"}